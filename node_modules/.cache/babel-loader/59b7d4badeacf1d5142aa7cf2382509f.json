{"ast":null,"code":"import _createForOfIteratorHelper from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/kim/Documents/Programming/ARG/CLIENT/node_modules/@babel/runtime/regenerator/index.js\";import'./assets/css/camera.css';import haversine from'haversine-distance';import React,{createContext,useState}from'react';import Dialog from\"./components/Dialog\";import PuzzleBottle from'./components/puzzles/Bottle';import PuzzleRings from'./components/puzzles/Rings';import PuzzleTrolls from'./components/puzzles/Trolls';import RuneTranslation from'./components/puzzles/RuneTranslation';import Alvkungen from'./components/Alvkungen';import AlvkungenRunes from'./components/puzzles/AlvkungenRunes';import AlvBattle from'./components/puzzles/AlvBattle';import KvarnLock from'./components/puzzles/Kvarnen';import PaperPickup from'./components/puzzles/PaperPickup';import FinalDialog from\"./components/FinalDialog\";import\"./assets/css/puzzle.css\";import{withRouter}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Camera=/*#__PURE__*/function(_React$Component){_inherits(Camera,_React$Component);var _super=_createSuper(Camera);function Camera(props){var _this;_classCallCheck(this,Camera);_this=_super.call(this,props);_this.state={locations:JSON.parse(localStorage.getItem(\"locations\")),place:{},npc:{},dialog:{},index:0,lat:\"\",lon:\"\",user:JSON.parse(localStorage.getItem(\"arg_user\")),playerIsNearLocation:false,answer:\"\",initialLocation:false,usingCamera:false};_this.debug=false;_this.dialogHandler=_this.dialogHandler.bind(_assertThisInitialized(_this));_this.locationHandler=_this.locationHandler.bind(_assertThisInitialized(_this));return _this;}/**\n   * Gets userPosition and initializes locations on first startup.\n   * Shows waiting element if Locations are still initialized.\n   */_createClass(Camera,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _localStorage$getItem;var waiting;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:document.querySelector(\"#cameraNav\").classList.remove(\"notification\");(_localStorage$getItem=localStorage.getItem(\"arg_tipIndex\"))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:localStorage.setItem(\"arg_tipIndex\",0);waiting=document.querySelector(\"#waiting\");if(localStorage.getItem(\"locations\")){_context.next=8;break;}waiting.style.display=\"flex\";_context.next=7;return this.initializeGameLocations();case 7:waiting.style.display=\"none\";case 8:_context.next=10;return this.setInitialLocation();case 10:if(!this.state.usingCamera)this.removeVideoBackground();case 11:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()/**\n   * Gets Playerposition\n   * @param {function} success - Runs the function if position was successfully determined\n   * @param {function} error - Runs the callback for position not being retrieved\n   */},{key:\"startTracking\",value:function startTracking(){console.log(\"TRACKING\");var options={enableHighAccuracy:true,timeout:30000,maximumAge:0};navigator.geolocation.getCurrentPosition(this.success.bind(this),this.error,options);this.setState({usingCamera:true});}/**\n * Gets locations from server.\n */},{key:\"setInitialLocation\",value:function(){var _setInitialLocation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var request,response,json;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:request=new Request(\"https://dev.svnoak.net/api/user/initial/\".concat(this.state.user.id));_context2.next=3;return fetch(request);case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:json=_context2.sent;this.setState({initialLocation:json});case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function setInitialLocation(){return _setInitialLocation.apply(this,arguments);}return setInitialLocation;}()/**\n   * Fetches gamelocations from server and puts them in localstorage and state\n   */},{key:\"initializeGameLocations\",value:function(){var _initializeGameLocations=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var request,response,json;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:request=new Request(\"https://dev.svnoak.net/api/place\");_context3.next=3;return fetch(request);case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:json=_context3.sent;localStorage.setItem(\"locations\",JSON.stringify(json));this.setState({locations:JSON.parse(localStorage.getItem(\"locations\"))});case 9:case\"end\":return _context3.stop();}}},_callee3,this);}));function initializeGameLocations(){return _initializeGameLocations.apply(this,arguments);}return initializeGameLocations;}()/**\n   * Removes the videobackground that ARjs places when moving to different page.\n   */},{key:\"componentWillUnmount\",value:function componentWillUnmount(){console.log(\"UNMOUNT\");this.removeVideoBackground();}/**\n   * Checks if player is near any gamelocation and sets state accordingly.\n   * @param {object} pos - Object that holds player coordinates\n   */},{key:\"success\",value:function(){var _success=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(pos){var playerLat,playerLon,locationID,loc,locLat,locLon,playerIsNearLocation;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"TRACKING USER\");console.log(pos);playerLat=pos.coords.latitude;playerLon=pos.coords.longitude;if(this.debug){locationID=document.querySelector(\"#location\").value;loc=this.locationHandler(locationID);locLat=loc.latitude;locLon=loc.longitude;playerLat=locLat;playerLon=locLon;}_context4.next=7;return this.PlayerIsNearLocation(playerLat,playerLon);case 7:playerIsNearLocation=_context4.sent;this.setState({playerIsNearLocation:playerIsNearLocation,lat:playerLat,lon:playerLon});case 9:case\"end\":return _context4.stop();}}},_callee4,this);}));function success(_x){return _success.apply(this,arguments);}return success;}()/**\n   * Checks if player geolocation is near any matching gamelocations.\n   * @param {object} coords - Object that holds player coordinates\n   * @returns {bool}\n   */},{key:\"PlayerIsNearLocation\",value:function(){var _PlayerIsNearLocation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(playerLat,playerLon){var playerLocation,_iterator,_step,location,locationCoords,distance;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:playerLocation={latitude:playerLat,longitude:playerLon};if(!this.state.initialLocation){_context5.next=5;break;}_context5.next=4;return this.setPlaceState(10,this.state.user.id);case 4:return _context5.abrupt(\"return\",true);case 5:_iterator=_createForOfIteratorHelper(this.state.locations);_context5.prev=6;_iterator.s();case 8:if((_step=_iterator.n()).done){_context5.next=18;break;}location=_step.value;locationCoords={latitude:location.latitude,longitude:location.longitude};distance=haversine(playerLocation,locationCoords);if(!(distance<location.area)){_context5.next=16;break;}_context5.next=15;return this.setPlaceState(location.id,this.state.user.id);case 15:return _context5.abrupt(\"return\",true);case 16:_context5.next=8;break;case 18:_context5.next=23;break;case 20:_context5.prev=20;_context5.t0=_context5[\"catch\"](6);_iterator.e(_context5.t0);case 23:_context5.prev=23;_iterator.f();return _context5.finish(23);case 26:return _context5.abrupt(\"return\",false);case 27:case\"end\":return _context5.stop();}}},_callee5,this,[[6,20,23,26]]);}));function PlayerIsNearLocation(_x2,_x3){return _PlayerIsNearLocation.apply(this,arguments);}return PlayerIsNearLocation;}()/**\n   * Fetches relevant dialogs and npc data from database depending on location\n   * Sets state to be used by other functions.\n   * @param {int} placeID \n   * @param {int} userID \n   */},{key:\"setPlaceState\",value:function(){var _setPlaceState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(placeID,userID){var request,response,json,allNPCs;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:request=new Request(\"https://dev.svnoak.net/api/place/\".concat(placeID,\"/\").concat(userID));_context6.next=3;return fetch(request);case 3:response=_context6.sent;_context6.next=6;return response.json();case 6:json=_context6.sent;if(!(placeID==\"6\"||placeID==\"9\")){_context6.next=13;break;}_context6.next=10;return this.fetchNPCS();case 10:allNPCs=_context6.sent;allNPCs.push(json.npc);json.npc=allNPCs;case 13:this.setState({place:json.place,npc:json.npc,dialog:json.dialog});case 14:case\"end\":return _context6.stop();}}},_callee6,this);}));function setPlaceState(_x4,_x5){return _setPlaceState.apply(this,arguments);}return setPlaceState;}()/**\n   * Warns if playerposition couldn't be retrieved\n   * @param {object} err - Errorobject from watchposition function.\n   */},{key:\"error\",value:function error(err){alert(\"Något gick fel. Har du aktiverat din GPS?\");console.warn('ERROR('+err.code+'): '+err.message);}/**\n   * Checks what kind of dialog the player sees.\n   * Triggers setDialog option or continues dialog accordingly\n   * @param {string} triggerType - \"puzzle\", \"trigger\" or \"dialog\"\n   */},{key:\"dialogHandler\",value:function dialogHandler(triggerType){console.log(triggerType);var index=this.state.index;var currentDialog=this.state.dialog[index];var dialogLength=this.state.dialog.length;var nextDialog=this.state.dialog[index+1];var npc=this.state.npc;if(currentDialog){if(nextDialog&&nextDialog.reveal&&npc.name!=nextDialog.reveal){npc.name=nextDialog.reveal;this.setState({npc:npc});}// Check what kind of dialog is shown.\nif(currentDialog.type==\"puzzle\"){if(currentDialog.initial)this.setState({initialLocation:false});this.setDialog(index,dialogLength,currentDialog);}// End if first dialog is shown and player doesn't click on npc.\nelse if(index==0&&triggerType!=\"trigger\")return;// Check if dialog should be marked done or just continue to next\nelse{if(currentDialog.markDone){this.setDialog(index,dialogLength,currentDialog);}else if(currentDialog){this.setState({index:this.state.index+1});}}}}/**\n   * Forwards player in dialog or puzzle accordingly and sets new dialog\n   * Triggers markDone function if end of dialog or puzzleanswer is available\n   * @param {int} index - Current index from state.index\n   * @param {int} dialogLength - length of all dialogs state.dialog\n   * @param {object} dialog - The current dialog depending on index and state.dialog\n   * @param {string} answer - User submission, can be empty if use is in dialog screen\n   */},{key:\"setDialog\",value:function(){var _setDialog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(index,dialogLength,dialog){var answer,inputFields,userInput,dialogDone,userEnding,placeID,locations,newLocations,_args7=arguments;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:answer=_args7.length>3&&_args7[3]!==undefined?_args7[3]:\"\";// If there is an input field, assign answer userInput\nif(document.querySelector(\"input\")!=null){inputFields=document.querySelectorAll(\"input\");if(inputFields.length>1){userInput=\"\".concat(inputFields[0].value).concat(inputFields[1].value).concat(inputFields[2].value);console.log(userInput);}else{userInput=document.querySelector(\"input\").value;}answer=userInput?userInput:\"Inget svar\";}// Move players forward in story or give appropriate puzzlefeedback.\n_context7.next=4;return this.markDialogDone(dialog,answer);case 4:dialogDone=_context7.sent;if(dialogDone.ending)localStorage.setItem(\"arg_ending\",dialogDone.ending);console.log(dialog.camera);if(dialog.chat)document.querySelector(\"#chatNav\").classList.add(\"notification\");if(dialog.reward&&dialog.type!==\"puzzle\")document.querySelector(\"#inventoryNav\").classList.add(\"notification\");if(!dialogDone.done){_context7.next=37;break;}console.log(dialog.camera);if(dialog.reward&&dialog.type===\"puzzle\")document.querySelector(\"#inventoryNav\").classList.add(\"notification\");if(dialog.finish)window.location.href=\"/end\";// See so there are more dialogs to continue to otherwise reset all states\nif(!(index<dialogLength)){_context7.next=29;break;}console.log(index);console.log(dialogLength);// Whole special case for the final dialogs;\nuserEnding=localStorage.getItem(\"arg_ending\");console.log(dialog);if(!(userEnding&&dialog.id==\"22\")){_context7.next=24;break;}console.log(\"USER ENDING EXISTS\");this.setState({dialog:this.state.dialog.filter(function(dialog){return dialog.ending==userEnding||dialog.ending==undefined;})},this.setState({index:this.state.index+1}));localStorage.setItem(\"arg_tipIndex\",\"0\");localStorage.removeItem(\"arg_puzzleTips\");return _context7.abrupt(\"return\");case 24:localStorage.removeItem(\"arg_puzzleTips\");localStorage.setItem(\"arg_tipIndex\",0);this.setState({index:this.state.index+1});// Reset all states if there are no more dialogs\n_context7.next=33;break;case 29:placeID=this.state.place.id;locations=this.state.locations;newLocations=locations.filter(function(location){return location.id!=placeID;});this.setState({playerIsNearLocation:false,index:0,place:{},dialog:{},npc:{},answer:\"\",usingCamera:false});case 33:localStorage.removeItem(\"arg_puzzleTips\");localStorage.setItem(\"arg_tipIndex\",0);_context7.next=38;break;case 37:this.setState({answer:answer});case 38:case\"end\":return _context7.stop();}}},_callee7,this);}));function setDialog(_x6,_x7,_x8){return _setDialog.apply(this,arguments);}return setDialog;}()/**\n   * Marks dialogs and puzzles done in databas\n   * @param {object} dialog - current dialog user is seeing\n   * @param {string} answer - usersubmission, if any.\n   * @returns {bool}\n   */},{key:\"markDialogDone\",value:function(){var _markDialogDone=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dialog,answer){var request,data,response,json;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:request=new Request(\"https://dev.svnoak.net/api/dialog/done\");data={dialog:dialog.id,user:this.state.user.id,place:this.state.place.id,tips:parseInt(localStorage.getItem(\"arg_tipIndex\"))/2,answer:answer};_context8.next=4;return fetch(request,{method:'POST',headers:{'Accept':'application/json, text/plain, */*','Content-Type':'application/json'},body:JSON.stringify(data)});case 4:response=_context8.sent;_context8.next=7;return response.json();case 7:json=_context8.sent;return _context8.abrupt(\"return\",json);case 9:case\"end\":return _context8.stop();}}},_callee8,this);}));function markDialogDone(_x9,_x10){return _markDialogDone.apply(this,arguments);}return markDialogDone;}()/**\n   * Placeholder for when player is not near game location.\n   * Placeholder for when gamelocation has no more dialogs or puzzles.\n   * @returns {HTMLElement}\n   */},{key:\"emptyPlace\",value:function emptyPlace(){var npc={imageLink:\"transparent.png\"};var dialog={text:\"Det verkar inte finnas något här\",type:\"placeholder\"};var element=/*#__PURE__*/_jsx(Dialog,{npc:npc,handler:this.dialogHandler,dialog:dialog});return element;}/**\n   * Removes videobackground\n   */},{key:\"removeVideoBackground\",value:function removeVideoBackground(){if(document.querySelector(\"video\")!=null){document.querySelectorAll(\"video\").forEach(function(video){return video.remove();});}}/**\n   * Chooses the location depending on an ID.\n   * @param {int} locationID\n   * @returns \n   */},{key:\"locationHandler\",value:function locationHandler(locationID){var locations=this.state.locations;var choosenLocation=locations.find(function(location){return location.id==locationID;});return choosenLocation;}/**\n   * Chooses puzzle accordingly to display\n   * Needs to be a case each, because each puzzle has it's little nifty thing going on.\n   * @param {object} puzzle \n   * @returns \n   */},{key:\"puzzleHandler\",value:function puzzleHandler(puzzle){var puzzleElement;switch(puzzle.id){case\"2\":puzzleElement=/*#__PURE__*/_jsx(PuzzleBottle,{image:puzzle.imageLink,text:puzzle.text,handler:this.dialogHandler});break;case\"6\":puzzleElement=/*#__PURE__*/_jsx(PuzzleRings,{image:puzzle.imageLink,text:puzzle.text,answer:this.state.answer,handler:this.dialogHandler,video:this.removeVideoBackground});break;case\"12\":puzzleElement=/*#__PURE__*/_jsx(PaperPickup,{image:puzzle.imageLink,text:puzzle.text,answer:this.state.answer,handler:this.dialogHandler,video:this.removeVideoBackground});break;case\"15\":puzzleElement=/*#__PURE__*/_jsx(PuzzleTrolls,{image:puzzle.imageLink,text:puzzle.text,handler:this.dialogHandler});break;case\"19\":puzzleElement=/*#__PURE__*/_jsx(RuneTranslation,{image:puzzle.imageLink,text:puzzle.text,handler:this.dialogHandler,video:this.removeVideoBackground});break;case\"22\":puzzleElement=/*#__PURE__*/_jsx(AlvkungenRunes,{image:puzzle.imageLink,text:puzzle.text,handler:this.dialogHandler,video:this.removeVideoBackground});break;case\"28\":case\"31\":case\"34\":puzzleElement=/*#__PURE__*/_jsx(AlvBattle,{image:puzzle.imageLink,itemImage:puzzle.itemImage,text:puzzle.text,handler:this.dialogHandler});break;case\"37\":puzzleElement=/*#__PURE__*/_jsx(KvarnLock,{image:puzzle.imageLink,text:puzzle.text,handler:this.dialogHandler,video:this.removeVideoBackground,answer:this.state.answer});break;default:break;}return puzzleElement;}/**\n   * Gets all NPCS from database to use in final Scene.\n   * @returns {array} Array of all NPCS in the game\n   */},{key:\"fetchNPCS\",value:function(){var _fetchNPCS=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var userID,request,response;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:userID=this.state.user.id;request=new Request(\"https://dev.svnoak.net/api/inventory/npc/\".concat(userID));_context9.next=4;return fetch(request);case 4:response=_context9.sent;_context9.next=7;return response.json();case 7:return _context9.abrupt(\"return\",_context9.sent);case 8:case\"end\":return _context9.stop();}}},_callee9,this);}));function fetchNPCS(){return _fetchNPCS.apply(this,arguments);}return fetchNPCS;}()},{key:\"loadingPlace\",value:function loadingPlace(){var npc={imageLink:\"transparent.png\"};var dialog={type:\"placeholder\"};dialog.text=localStorage.getItem(\"arg_puzzleTips\")?\"Öpnna kameran för att lösa gåtan\":\"Du ser dig omkring\";var element=/*#__PURE__*/_jsx(Dialog,{npc:npc,handler:this.dialogHandler,dialog:dialog});return element;}/**\n   * Conditianlly displays puzzle or dialog to player\n   * @returns {HTMLElement}\n   */},{key:\"displayElement\",value:function displayElement(){var isAtLocation=this.state.playerIsNearLocation;var element;var currentDialog=\"\";// Player is at location and there are dialogs in DB\nif(isAtLocation){if(this.state.dialog){currentDialog=this.state.dialog[this.state.index];console.log(currentDialog);// If there are dialogs/puzzles at the location, return elements accordingly\nif(currentDialog){if(currentDialog.type==\"dialog\"||currentDialog.type==\"info\"){// If dialog, check who speaks or if it's only an info dialog.\nif(this.state.place.id==\"6\"){element=/*#__PURE__*/_jsx(Alvkungen,{npc:this.state.npc,user:this.state.user,dialog:currentDialog,triggerHandler:this.triggerHandler,dialogTriggered:this.state.dialogTriggered,dialogHandler:this.dialogHandler});}else if(this.state.place.id==\"9\"){element=/*#__PURE__*/_jsx(FinalDialog,{npc:this.state.npc,user:this.state.user,dialog:currentDialog,triggerHandler:this.triggerHandler,dialogTriggered:this.state.dialogTriggered,dialogHandler:this.dialogHandler});}else{element=/*#__PURE__*/_jsx(Dialog,{npc:this.state.npc,user:this.state.user,dialog:currentDialog,triggerHandler:this.triggerHandler,dialogTriggered:this.state.dialogTriggered,dialogHandler:this.dialogHandler});}}// Set puzzle depending on textbased or AR.\nelse if(currentDialog.type==\"puzzle\"){this.removeVideoBackground();element=this.puzzleHandler(currentDialog);// Save puzzleTips so they can be retrieved in the chat\nvar puzzleTips=currentDialog.tips;console.log(puzzleTips);var stringifiedTips=JSON.stringify(puzzleTips);localStorage.setItem(\"arg_puzzleTips\",stringifiedTips);}// Create some sort of notification and save newly income chat in localStorage\nelse if(currentDialog.type==\"chat\"){var chatMessages=this.state.dialog.filter(function(dialog){return dialog.type==\"chat\";});var stringifiedChat=JSON.stringify(chatMessages);localStorage.setItem(\"arg_dialog\",stringifiedChat);localStorage.setItem(\"arg_place\",this.state.place.id);this.setState({usingCamera:false});}}else{element=this.emptyPlace();}}else{element=this.emptyPlace();}}/* element = this.emptyPlace(); */return element;}},{key:\"render\",value:function render(){/* let dialog = this.state.dialog;\n    let index = this.state.index;\n    let off = false;\n    if( dialog && dialog[index] && dialog[index.type] == \"chat\" ) off = true; */return/*#__PURE__*/_jsxs(\"div\",{id:\"cameraScene\",children:[/*#__PURE__*/_jsx(Waiting,{}),!this.state.usingCamera&&/*#__PURE__*/_jsx(CameraPrompt,{track:this.startTracking.bind(this)}),!this.state.playerIsNearLocation&&this.state.usingCamera&&this.loadingPlace(),this.state.playerIsNearLocation&&this.state.usingCamera&&this.displayElement(),this.debug&&/*#__PURE__*/_jsx(LocationList,{handler:this.locationHandler})]});}}]);return Camera;}(React.Component);/**\n * Overlay while fetching locations at initial startup.\n * @returns {HTMLElement}\n */function Waiting(){return/*#__PURE__*/_jsx(\"div\",{id:\"waiting\",children:\"Initializing Locations\"});}/**\n * Locationchanger for debug mode.\n * @param {object} props - this \n * @returns \n */function LocationList(props){return/*#__PURE__*/_jsxs(\"div\",{id:\"locationChanger\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"locations\",id:\"location\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"Gamla V\\xE4ster\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"Boulebaren\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"Baltazargatan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"Lugnet\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"Davidshall\"}),/*#__PURE__*/_jsx(\"option\",{value:\"6\",children:\"Stadsbiblioteket\"}),/*#__PURE__*/_jsx(\"option\",{value:\"7\",children:\"Lilla Dammen\"}),/*#__PURE__*/_jsx(\"option\",{value:\"8\",children:\"Stora Dammen\"}),/*#__PURE__*/_jsx(\"option\",{value:\"9\",children:\"Slottsm\\xF6llan\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.handler();},children:\"Set location\"})]});}/**\n * Puts up a camera prompt so user needs to activate camera manually.\n * @param {object} props - this\n * @returns {HTML Element} \n */function CameraPrompt(props){var prompt=localStorage.getItem(\"arg_puzzleTips\")?\"Tryck för att titta på puzzlet\":\"Tryck för att se dig omkring\";return/*#__PURE__*/_jsxs(\"div\",{id:\"prompt\",onClick:function onClick(){return props.track();},children:[/*#__PURE__*/_jsx(\"div\",{id:\"camera\"}),prompt]});}/* \nfunction navigateToEnd(){\n  let navigate = useNavigate();\n  navigate(\"/end\");\n} */export default Camera;","map":{"version":3,"names":["haversine","React","createContext","useState","Dialog","PuzzleBottle","PuzzleRings","PuzzleTrolls","RuneTranslation","Alvkungen","AlvkungenRunes","AlvBattle","KvarnLock","PaperPickup","FinalDialog","withRouter","Camera","props","state","locations","JSON","parse","localStorage","getItem","place","npc","dialog","index","lat","lon","user","playerIsNearLocation","answer","initialLocation","usingCamera","debug","dialogHandler","bind","locationHandler","document","querySelector","classList","remove","setItem","waiting","style","display","initializeGameLocations","setInitialLocation","removeVideoBackground","console","log","options","enableHighAccuracy","timeout","maximumAge","navigator","geolocation","getCurrentPosition","success","error","setState","request","Request","id","fetch","response","json","stringify","pos","playerLat","coords","latitude","playerLon","longitude","locationID","value","loc","locLat","locLon","PlayerIsNearLocation","playerLocation","setPlaceState","location","locationCoords","distance","area","placeID","userID","fetchNPCS","allNPCs","push","err","alert","warn","code","message","triggerType","currentDialog","dialogLength","length","nextDialog","reveal","name","type","initial","setDialog","markDone","inputFields","querySelectorAll","userInput","markDialogDone","dialogDone","ending","camera","chat","add","reward","done","finish","window","href","userEnding","filter","undefined","removeItem","newLocations","data","tips","parseInt","method","headers","body","imageLink","text","element","forEach","video","choosenLocation","find","puzzle","puzzleElement","itemImage","isAtLocation","triggerHandler","dialogTriggered","puzzleHandler","puzzleTips","stringifiedTips","chatMessages","stringifiedChat","emptyPlace","startTracking","loadingPlace","displayElement","Component","Waiting","LocationList","handler","CameraPrompt","prompt","track"],"sources":["/home/kim/Documents/Programming/ARG/CLIENT/src/camera.js"],"sourcesContent":["import './assets/css/camera.css';\nimport haversine from 'haversine-distance';\nimport React, { createContext, useState } from 'react';\nimport Dialog from \"./components/Dialog\";\nimport PuzzleBottle from './components/puzzles/Bottle';\nimport PuzzleRings from './components/puzzles/Rings';\nimport PuzzleTrolls from './components/puzzles/Trolls';\nimport RuneTranslation from './components/puzzles/RuneTranslation';\nimport Alvkungen from './components/Alvkungen';\nimport AlvkungenRunes from './components/puzzles/AlvkungenRunes';\nimport AlvBattle from './components/puzzles/AlvBattle';\nimport KvarnLock from './components/puzzles/Kvarnen';\nimport PaperPickup from './components/puzzles/PaperPickup';\nimport FinalDialog from \"./components/FinalDialog\"\nimport \"./assets/css/puzzle.css\"\nimport { withRouter } from \"react-router-dom\";\n\nclass Camera extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      locations: JSON.parse(localStorage.getItem(\"locations\")),\n      place: {},\n      npc: {},\n      dialog: {},\n      index: 0,\n      lat: \"\",\n      lon: \"\",\n      user: JSON.parse(localStorage.getItem(\"arg_user\")),\n      playerIsNearLocation: false,\n      answer: \"\",\n      initialLocation: false,\n      usingCamera: false\n  }\n    this.debug = false;\n    this.dialogHandler = this.dialogHandler.bind(this);\n    this.locationHandler = this.locationHandler.bind(this);\n}\n\n  /**\n   * Gets userPosition and initializes locations on first startup.\n   * Shows waiting element if Locations are still initialized.\n   */\n  async componentDidMount(){\n    document.querySelector(\"#cameraNav\").classList.remove(\"notification\");\n    localStorage.getItem(\"arg_tipIndex\") ?? localStorage.setItem(\"arg_tipIndex\", 0);\n    const waiting = document.querySelector(\"#waiting\");\n    if( !localStorage.getItem(\"locations\") ){\n      waiting.style.display = \"flex\";\n      await this.initializeGameLocations();\n      waiting.style.display = \"none\"\n    }\n\n    await this.setInitialLocation();\n\n    if( !this.state.usingCamera ) this.removeVideoBackground();\n    }\n\n  /**\n   * Gets Playerposition\n   * @param {function} success - Runs the function if position was successfully determined\n   * @param {function} error - Runs the callback for position not being retrieved\n   */\n   startTracking(){\n     console.log(\"TRACKING\");\n      const options = {\n        enableHighAccuracy: true,\n        timeout: 30000,\n        maximumAge: 0\n      }\n      navigator.geolocation.getCurrentPosition(this.success.bind(this), this.error, options);\n      this.setState({usingCamera: true});\n    }\n    \n/**\n * Gets locations from server.\n */\n  async setInitialLocation(){\n    const request = new Request(`https://dev.svnoak.net/api/user/initial/${this.state.user.id}`);\n    const response = await fetch(request);\n    const json = await response.json();\n    this.setState({initialLocation: json});\n  }\n\n  /**\n   * Fetches gamelocations from server and puts them in localstorage and state\n   */\n   async initializeGameLocations(){\n    const request = new Request(`https://dev.svnoak.net/api/place`);\n    const response = await fetch(request);\n    const json = await response.json();\n    localStorage.setItem(\"locations\", JSON.stringify(json));\n    this.setState({locations: JSON.parse(localStorage.getItem(\"locations\"))});\n  }\n\n  /**\n   * Removes the videobackground that ARjs places when moving to different page.\n   */\n  componentWillUnmount() {\n    console.log(\"UNMOUNT\");\n    this.removeVideoBackground();\n  }\n\n  /**\n   * Checks if player is near any gamelocation and sets state accordingly.\n   * @param {object} pos - Object that holds player coordinates\n   */\n  async success(pos){\n    console.log(\"TRACKING USER\");\n    console.log(pos);\n    let playerLat = pos.coords.latitude;\n    let playerLon = pos.coords.longitude;\n    if( this.debug ){\n      let locationID = document.querySelector(\"#location\").value;\n      let loc = this.locationHandler(locationID);\n      let locLat = loc.latitude;\n      let locLon = loc.longitude;\n\n      playerLat = locLat;\n      playerLon = locLon;\n    }\n    const playerIsNearLocation  = await this.PlayerIsNearLocation(playerLat, playerLon);\n    this.setState({\n      playerIsNearLocation: playerIsNearLocation,\n      lat: playerLat,\n      lon: playerLon\n    });\n  }\n\n  /**\n   * Checks if player geolocation is near any matching gamelocations.\n   * @param {object} coords - Object that holds player coordinates\n   * @returns {bool}\n   */\n  async PlayerIsNearLocation(playerLat, playerLon){\n    const playerLocation = { latitude: playerLat, longitude: playerLon };\n\n    if( this.state.initialLocation ){\n      await this.setPlaceState(10, this.state.user.id);    \n      return true;\n    }\n    for( let location of this.state.locations ){\n      const locationCoords = { latitude: location.latitude, longitude: location.longitude };\n      const distance = haversine(playerLocation, locationCoords);\n      if( distance < location.area ){\n        await this.setPlaceState(location.id, this.state.user.id);\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  /**\n   * Fetches relevant dialogs and npc data from database depending on location\n   * Sets state to be used by other functions.\n   * @param {int} placeID \n   * @param {int} userID \n   */\n  async setPlaceState(placeID, userID){\n    const request = new Request(`https://dev.svnoak.net/api/place/${placeID}/${userID}`);\n    const response = await fetch(request);\n    const json = await response.json();\n      if( placeID == \"6\" || placeID == \"9\"){\n        let allNPCs = await this.fetchNPCS();\n        allNPCs.push(json.npc);\n        json.npc = allNPCs;\n      }\n\n    this.setState({\n      place: json.place,\n      npc: json.npc,\n      dialog: json.dialog\n    });\n  }\n\n  /**\n   * Warns if playerposition couldn't be retrieved\n   * @param {object} err - Errorobject from watchposition function.\n   */\n  error(err){\n    alert(\"Något gick fel. Har du aktiverat din GPS?\");\n    console.warn('ERROR(' + err.code + '): ' + err.message);\n  }\n\n\n  /**\n   * Checks what kind of dialog the player sees.\n   * Triggers setDialog option or continues dialog accordingly\n   * @param {string} triggerType - \"puzzle\", \"trigger\" or \"dialog\"\n   */\n  dialogHandler(triggerType){\n    console.log(triggerType);\n    let index = this.state.index;\n    let currentDialog = this.state.dialog[index];\n    let dialogLength = this.state.dialog.length;\n    let nextDialog = this.state.dialog[index + 1];\n    let npc = this.state.npc;\n\n    if( currentDialog ){\n    \n      if( nextDialog && nextDialog.reveal && npc.name != nextDialog.reveal ){\n        npc.name = nextDialog.reveal;\n        this.setState({npc: npc});\n      }\n\n        // Check what kind of dialog is shown.\n      if(currentDialog.type == \"puzzle\"){\n        if( currentDialog.initial ) this.setState({initialLocation: false});\n        this.setDialog(index, dialogLength, currentDialog);\n      }\n      \n      // End if first dialog is shown and player doesn't click on npc.\n      else if( index == 0 && triggerType != \"trigger\" ) return;\n      \n      // Check if dialog should be marked done or just continue to next\n      else {\n        if( currentDialog.markDone ){\n          this.setDialog(index, dialogLength, currentDialog);\n        } else if( currentDialog ){\n          this.setState({index: this.state.index + 1});\n        }\n      }\n    }\n  }\n  \n  /**\n   * Forwards player in dialog or puzzle accordingly and sets new dialog\n   * Triggers markDone function if end of dialog or puzzleanswer is available\n   * @param {int} index - Current index from state.index\n   * @param {int} dialogLength - length of all dialogs state.dialog\n   * @param {object} dialog - The current dialog depending on index and state.dialog\n   * @param {string} answer - User submission, can be empty if use is in dialog screen\n   */\n  async setDialog(index, dialogLength, dialog, answer = \"\"){\n\n    // If there is an input field, assign answer userInput\n    if( document.querySelector(\"input\") != null ){\n      const inputFields = document.querySelectorAll(\"input\")\n      \n      let userInput;\n      if( inputFields.length > 1 ){\n        userInput = `${inputFields[0].value}${inputFields[1].value}${inputFields[2].value}`;\n        console.log(userInput);\n      } else {\n        userInput = document.querySelector(\"input\").value\n      }\n      \n      answer = userInput ? userInput : \"Inget svar\";\n    }\n\n    // Move players forward in story or give appropriate puzzlefeedback.\n    let dialogDone = await this.markDialogDone(dialog, answer);\n    if( dialogDone.ending )  localStorage.setItem(\"arg_ending\", dialogDone.ending);\n      console.log(dialog.camera);\n\n      if ( dialog.chat ) document.querySelector(\"#chatNav\").classList.add(\"notification\");\n      if( dialog.reward && dialog.type !== \"puzzle\"  ) document.querySelector(\"#inventoryNav\").classList.add(\"notification\");\n\n      if( dialogDone.done ){\n        console.log(dialog.camera)\n        if( dialog.reward && dialog.type === \"puzzle\") document.querySelector(\"#inventoryNav\").classList.add(\"notification\");\n        if( dialog.finish ) window.location.href = \"/end\";\n        // See so there are more dialogs to continue to otherwise reset all states\n        if( index < dialogLength){\n\n          console.log(index);\n          console.log(dialogLength);\n\n          // Whole special case for the final dialogs;\n          let userEnding = localStorage.getItem(\"arg_ending\");\n          console.log(dialog)\n          if( userEnding && dialog.id == \"22\"){\n            console.log(\"USER ENDING EXISTS\");\n            this.setState( {dialog: this.state.dialog.filter(dialog => dialog.ending == userEnding || dialog.ending == undefined )} , this.setState({index: this.state.index + 1}));\n            localStorage.setItem(\"arg_tipIndex\", \"0\");\n            localStorage.removeItem(\"arg_puzzleTips\");\n            return;\n          }\n          localStorage.removeItem(\"arg_puzzleTips\");\n          localStorage.setItem(\"arg_tipIndex\", 0);\n          this.setState({index: this.state.index + 1});\n          \n          // Reset all states if there are no more dialogs\n        } else {\n          const placeID = this.state.place.id;\n          const locations = this.state.locations;\n          const newLocations = locations.filter( location => location.id != placeID );\n\n          this.setState({\n            playerIsNearLocation: false, \n            index: 0, place: {}, \n            dialog:{}, npc:{},\n            answer: \"\",\n            usingCamera: false\n          });\n        }\n        localStorage.removeItem(\"arg_puzzleTips\")\n        localStorage.setItem(\"arg_tipIndex\", 0);\n      } else {\n        this.setState({answer: answer});\n      }\n  }\n\n  /**\n   * Marks dialogs and puzzles done in databas\n   * @param {object} dialog - current dialog user is seeing\n   * @param {string} answer - usersubmission, if any.\n   * @returns {bool}\n   */\n  async markDialogDone(dialog, answer){\n    const request = new Request(`https://dev.svnoak.net/api/dialog/done`);\n    const data = {\n        dialog: dialog.id,\n        user: this.state.user.id,\n        place: this.state.place.id,\n        tips: parseInt(localStorage.getItem(\"arg_tipIndex\")) / 2,\n        answer: answer\n    }\n\n    let response = await fetch(request ,{\n        method: 'POST',\n        headers: {\n        'Accept': 'application/json, text/plain, */*',\n        'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n    })\n    let json = await response.json();\n    return json;\n  }\n\n  /**\n   * Placeholder for when player is not near game location.\n   * Placeholder for when gamelocation has no more dialogs or puzzles.\n   * @returns {HTMLElement}\n   */\n  emptyPlace(){\n    \n    let npc = { imageLink: \"transparent.png\" };\n          let dialog = {\n            text: \"Det verkar inte finnas något här\",\n            type: \"placeholder\"\n        };\n    let element =\n    <Dialog\n      npc = {npc}\n      handler = {this.dialogHandler}\n      dialog = {dialog}\n    />\n    return element;\n  }\n\n  /**\n   * Removes videobackground\n   */\n  removeVideoBackground(){\n    if(document.querySelector(\"video\") != null){\n      document.querySelectorAll(\"video\").forEach(video => video.remove());\n    }\n  }\n\n  /**\n   * Chooses the location depending on an ID.\n   * @param {int} locationID\n   * @returns \n   */\n  locationHandler(locationID){\n    let locations = this.state.locations;\n    let choosenLocation = locations.find( location => location.id == locationID );\n    return choosenLocation;\n  }\n\n  /**\n   * Chooses puzzle accordingly to display\n   * Needs to be a case each, because each puzzle has it's little nifty thing going on.\n   * @param {object} puzzle \n   * @returns \n   */\n  puzzleHandler(puzzle){\n    let puzzleElement;\n    switch (puzzle.id) {\n      case \"2\":\n        puzzleElement = <PuzzleBottle \n        image={puzzle.imageLink} \n        text={puzzle.text}\n        handler={this.dialogHandler}\n        />\n        break;\n    \n      case \"6\":\n        puzzleElement = <PuzzleRings \n        image={puzzle.imageLink}\n        text={puzzle.text}\n        answer={this.state.answer}\n        handler={this.dialogHandler}\n        video={this.removeVideoBackground}\n        />\n        break;\n\n      case \"12\":\n        puzzleElement = <PaperPickup \n        image={puzzle.imageLink}\n        text={puzzle.text}\n        answer={this.state.answer}\n        handler={this.dialogHandler}\n        video={this.removeVideoBackground}\n        />\n      break;\n\n      case \"15\":\n        puzzleElement = <PuzzleTrolls \n        image={puzzle.imageLink}\n        text={puzzle.text}\n        handler={this.dialogHandler}\n        />\n        break;\n\n      case \"19\":\n        puzzleElement = <RuneTranslation\n        image={puzzle.imageLink}\n        text={puzzle.text}\n        handler={this.dialogHandler}\n        video={this.removeVideoBackground}\n        />\n        break;\n      \n      case \"22\":\n        puzzleElement = <AlvkungenRunes\n        image={puzzle.imageLink}\n        text={puzzle.text}\n        handler={this.dialogHandler}\n        video={this.removeVideoBackground}\n        />\n        break;\n\n      case \"28\":\n      case \"31\":\n      case \"34\":\n        puzzleElement = <AlvBattle\n        image={puzzle.imageLink}\n        itemImage={puzzle.itemImage}\n        text={puzzle.text}\n        handler={this.dialogHandler}\n        />\n        break;\n\n      case \"37\":\n        puzzleElement = <KvarnLock\n        image={puzzle.imageLink}\n        text={puzzle.text}\n        handler={this.dialogHandler}\n        video={this.removeVideoBackground}\n        answer={this.state.answer}\n        />\n        break;\n      default:\n        break;\n    }\n    return puzzleElement;\n  }\n\n  /**\n   * Gets all NPCS from database to use in final Scene.\n   * @returns {array} Array of all NPCS in the game\n   */\n  async fetchNPCS(){\n    const userID = this.state.user.id;\n    const request = new Request(`https://dev.svnoak.net/api/inventory/npc/${userID}`);\n    const response = await fetch(request);\n    return await response.json();\n  }\n\n  loadingPlace(){\n    let npc = { imageLink: \"transparent.png\" };\n    let dialog = {\n      type: \"placeholder\"\n    };\n\n    dialog.text = localStorage.getItem(\"arg_puzzleTips\") ? \"Öpnna kameran för att lösa gåtan\" : \"Du ser dig omkring\";\n    let element =\n    <Dialog\n      npc = {npc}\n      handler = {this.dialogHandler}\n      dialog = {dialog}\n    />\n    return element;\n  }\n\n  /**\n   * Conditianlly displays puzzle or dialog to player\n   * @returns {HTMLElement}\n   */\n  displayElement(){\n    const isAtLocation = this.state.playerIsNearLocation;\n    let element;\n    let currentDialog = \"\";\n\n    // Player is at location and there are dialogs in DB\n    if( isAtLocation ){\n      if( this.state.dialog ) {\n        currentDialog = this.state.dialog[this.state.index];\n        console.log(currentDialog);\n        // If there are dialogs/puzzles at the location, return elements accordingly\n        if( currentDialog ){\n          if( currentDialog.type == \"dialog\" || currentDialog.type == \"info\" ){\n\n            // If dialog, check who speaks or if it's only an info dialog.\n              if( this.state.place.id == \"6\" ){\n                element = <Alvkungen\n                    npc = {this.state.npc}\n                    user = {this.state.user}\n                    dialog = {currentDialog}\n                    triggerHandler = {this.triggerHandler}\n                    dialogTriggered = {this.state.dialogTriggered} \n                    dialogHandler = {this.dialogHandler}\n                  />\n              } else if ( this.state.place.id == \"9\" ){\n                element = <FinalDialog\n                  npc = {this.state.npc}\n                  user = {this.state.user}\n                  dialog = {currentDialog}\n                  triggerHandler = {this.triggerHandler}\n                  dialogTriggered = {this.state.dialogTriggered} \n                  dialogHandler = {this.dialogHandler}\n                />\n              } else {\n                element = <Dialog \n                npc = {this.state.npc}\n                user = {this.state.user}\n                dialog = {currentDialog}\n                triggerHandler = {this.triggerHandler}\n                dialogTriggered = {this.state.dialogTriggered} \n                dialogHandler = {this.dialogHandler}\n                />;\n              }\n                \n              }\n\n              // Set puzzle depending on textbased or AR.\n              else if( currentDialog.type == \"puzzle\"){\n                this.removeVideoBackground();\n                element = this.puzzleHandler(currentDialog);\n\n                // Save puzzleTips so they can be retrieved in the chat\n                let puzzleTips = currentDialog.tips;\n                console.log(puzzleTips);\n                let stringifiedTips = JSON.stringify(puzzleTips);\n                localStorage.setItem(\"arg_puzzleTips\", stringifiedTips);             \n                }\n\n              // Create some sort of notification and save newly income chat in localStorage\n              else if( currentDialog.type == \"chat\" ){\n                let chatMessages = this.state.dialog.filter( dialog => dialog.type == \"chat\" );\n                let stringifiedChat = JSON.stringify(chatMessages);\n                localStorage.setItem(\"arg_dialog\", stringifiedChat);\n                localStorage.setItem(\"arg_place\", this.state.place.id);\n                this.setState({usingCamera: false});\n              }\n          } else {\n            element = this.emptyPlace();\n          }\n        } else {\n          element = this.emptyPlace();\n        }\n      }\n      /* element = this.emptyPlace(); */\n\n      return element;\n  }\n\n  render(){\n    /* let dialog = this.state.dialog;\n    let index = this.state.index;\n    let off = false;\n    if( dialog && dialog[index] && dialog[index.type] == \"chat\" ) off = true; */\n    return(\n      <div id=\"cameraScene\">\n        <Waiting />\n        { !this.state.usingCamera && <CameraPrompt track={this.startTracking.bind(this)}/>}\n        {/* { this.state.usingCamera && this.state.dialog[this.state.index].type == \"chat\" && <CameraPrompt track={this.startTracking.bind(this)}/>} */}\n        { !this.state.playerIsNearLocation && this.state.usingCamera && this.loadingPlace() }\n        { this.state.playerIsNearLocation && this.state.usingCamera && this.displayElement() }\n        { this.debug && <LocationList handler={this.locationHandler}/> }\n      </div>\n    )\n  }\n}\n\n\n/**\n * Overlay while fetching locations at initial startup.\n * @returns {HTMLElement}\n */\nfunction Waiting(){\n  return(\n    <div id=\"waiting\">\n      Initializing Locations\n    </div>\n  )\n}\n\n/**\n * Locationchanger for debug mode.\n * @param {object} props - this \n * @returns \n */\nfunction LocationList(props){\n  return(\n    <div id=\"locationChanger\">\n      <select name=\"locations\" id=\"location\">\n        <option value=\"1\">Gamla Väster</option>\n        <option value=\"2\">Boulebaren</option>\n        <option value=\"3\">Baltazargatan</option>\n        <option value=\"4\">Lugnet</option>\n        <option value=\"5\">Davidshall</option>\n        <option value=\"6\">Stadsbiblioteket</option>\n        <option value=\"7\">Lilla Dammen</option>\n        <option value=\"8\">Stora Dammen</option>\n        <option value=\"9\">Slottsmöllan</option>\n      </select>\n      <button onClick={() => props.handler()}>Set location</button>\n    </div>\n  )\n}\n\n/**\n * Puts up a camera prompt so user needs to activate camera manually.\n * @param {object} props - this\n * @returns {HTML Element} \n */\nfunction CameraPrompt(props){\n  let prompt = localStorage.getItem(\"arg_puzzleTips\") ? \"Tryck för att titta på puzzlet\" : \"Tryck för att se dig omkring\"\n  return(\n    <div id=\"prompt\" onClick={() => props.track()}>\n      <div id=\"camera\"></div>\n      {prompt}\n    </div>\n  )\n}\n/* \nfunction navigateToEnd(){\n  let navigate = useNavigate();\n  navigate(\"/end\");\n} */\n \nexport default Camera;"],"mappings":"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"},"metadata":{},"sourceType":"module"}